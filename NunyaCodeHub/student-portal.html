<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Student Portal - NunyaCode Hub</title>
        <meta
            name="description"
            content="Access your courses, assignments, and progress in the NunyaCode Hub student portal."
        />
        <link rel="stylesheet" href="styles.css" />
        <link
            href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Inter:wght@300;400;500;600&display=swap"
            rel="stylesheet"
        />
        <link
            rel="stylesheet"
            href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
        />
        <style>
            .portal-container {
                max-width: 1200px;
                margin: 0 auto;
                padding: 20px;
                min-height: calc(100vh - 80px);
            }

            .login-container {
                max-width: 400px;
                margin: 100px auto;
                background: white;
                padding: 40px;
                border-radius: 12px;
                box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
                text-align: center;
            }

            .login-header {
                margin-bottom: 30px;
            }

            .login-header h2 {
                color: var(--deep-space);
                margin-bottom: 10px;
            }

            .login-form {
                display: flex;
                flex-direction: column;
                gap: 20px;
            }

            .form-group input {
                width: 100%;
                padding: 15px;
                border: 2px solid #e1e5e9;
                border-radius: 8px;
                font-size: 16px;
                transition: border-color 0.3s;
            }

            .form-group input:focus {
                outline: none;
                border-color: var(--vibrant-green);
            }

            .dashboard-container {
                display: none;
            }

            .dashboard-header {
                background: linear-gradient(
                    135deg,
                    var(--deep-space),
                    var(--cosmic-purple)
                );
                color: white;
                padding: 30px;
                border-radius: 12px;
                margin-bottom: 30px;
            }

            .dashboard-header h1 {
                margin: 0 0 10px 0;
                font-size: 2rem;
            }

            .dashboard-nav {
                display: flex;
                gap: 10px;
                margin-bottom: 30px;
                border-bottom: 2px solid #e1e5e9;
            }

            .nav-tab {
                background: none;
                border: none;
                padding: 15px 25px;
                cursor: pointer;
                border-bottom: 3px solid transparent;
                font-weight: 600;
                color: #6c7a89;
                transition: all 0.3s;
            }

            .nav-tab.active {
                color: var(--vibrant-green);
                border-bottom-color: var(--vibrant-green);
            }

            .tab-content {
                display: none;
            }

            .tab-content.active {
                display: block;
            }

            .progress-card {
                background: white;
                padding: 25px;
                border-radius: 12px;
                box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
                margin-bottom: 20px;
            }

            .progress-bar {
                background: #e1e5e9;
                height: 10px;
                border-radius: 5px;
                overflow: hidden;
                margin: 15px 0;
            }

            .progress-fill {
                height: 100%;
                background: linear-gradient(
                    90deg,
                    var(--vibrant-green),
                    #00d4aa
                );
                transition: width 0.5s ease;
            }

            .week-module {
                background: white;
                border: 2px solid #f0f0f0;
                border-radius: 10px;
                margin-bottom: 15px;
                overflow: hidden;
                transition: all 0.3s;
            }

            .week-module:hover {
                box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
            }

            .module-header {
                padding: 20px;
                background: #f8f9fa;
                border-bottom: 1px solid #e1e5e9;
                cursor: pointer;
                display: flex;
                justify-content: between;
                align-items: center;
            }

            .module-content {
                padding: 20px;
                display: none;
            }

            .module-content.expanded {
                display: block;
            }

            .assignment-item {
                background: #f8f9fa;
                padding: 15px;
                border-radius: 8px;
                margin-bottom: 10px;
                display: flex;
                justify-content: between;
                align-items: center;
            }

            .assignment-status {
                padding: 5px 15px;
                border-radius: 20px;
                font-size: 12px;
                font-weight: 600;
            }

            .status-completed {
                background: #d4edda;
                color: #155724;
            }

            .status-pending {
                background: #fff3cd;
                color: #856404;
            }

            .status-overdue {
                background: #f8d7da;
                color: #721c24;
            }

            .resource-grid {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
                gap: 20px;
            }

            .resource-card {
                background: white;
                border: 2px solid #f0f0f0;
                border-radius: 10px;
                padding: 20px;
                text-align: center;
                transition: all 0.3s;
            }

            .resource-card:hover {
                border-color: var(--vibrant-green);
                transform: translateY(-5px);
            }

            .resource-icon {
                font-size: 3rem;
                color: var(--vibrant-green);
                margin-bottom: 15px;
            }

            .grade-item {
                display: flex;
                justify-content: between;
                align-items: center;
                padding: 15px;
                background: white;
                border: 1px solid #e1e5e9;
                border-radius: 8px;
                margin-bottom: 10px;
            }

            .grade-score {
                font-size: 1.2rem;
                font-weight: bold;
                color: var(--vibrant-green);
            }

            .calendar-container {
                background: white;
                border-radius: 12px;
                padding: 20px;
                box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
            }

            .calendar-header {
                display: flex;
                justify-content: between;
                align-items: center;
                margin-bottom: 20px;
            }

            .calendar-grid {
                display: grid;
                grid-template-columns: repeat(7, 1fr);
                gap: 1px;
                background: #e1e5e9;
                border-radius: 8px;
                overflow: hidden;
            }

            .calendar-day {
                background: white;
                padding: 15px 10px;
                text-align: center;
                position: relative;
                cursor: pointer;
                transition: background 0.3s;
            }

            .calendar-day:hover {
                background: #f0f8ff;
            }

            .calendar-day.has-event::after {
                content: "";
                position: absolute;
                bottom: 5px;
                left: 50%;
                transform: translateX(-50%);
                width: 6px;
                height: 6px;
                background: var(--vibrant-green);
                border-radius: 50%;
            }

            .logout-btn {
                background: #dc3545;
                color: white;
                border: none;
                padding: 10px 20px;
                border-radius: 6px;
                cursor: pointer;
                float: right;
                margin-top: 10px;
            }

            /* Enhanced Dashboard Styles */
            .dashboard-grid {
                display: grid;
                grid-template-columns: 2fr 1fr;
                gap: 20px;
                margin-bottom: 30px;
            }

            .main-progress {
                grid-column: span 1;
            }

            .progress-header {
                display: flex;
                justify-content: space-between;
                align-items: center;
                margin-bottom: 20px;
            }

            .progress-actions {
                display: flex;
                gap: 10px;
            }

            .btn-small {
                padding: 8px 16px;
                font-size: 14px;
                border-radius: 6px;
                border: none;
                cursor: pointer;
                display: flex;
                align-items: center;
                gap: 6px;
                transition: all 0.3s;
            }

            .btn-small.btn-outline {
                background: transparent;
                border: 1px solid var(--gray-medium);
                color: var(--gray-medium);
            }

            .btn-small.btn-outline:hover {
                border-color: var(--vibrant-green);
                color: var(--vibrant-green);
            }

            .progress-summary {
                display: grid;
                grid-template-columns: 1fr auto;
                gap: 30px;
                align-items: center;
                margin-bottom: 30px;
            }

            .progress-stats {
                display: grid;
                grid-template-columns: repeat(2, 1fr);
                gap: 20px;
            }

            .stat-item {
                text-align: center;
            }

            .stat-value {
                display: block;
                font-size: 2rem;
                font-weight: bold;
                color: var(--vibrant-green);
                font-family: var(--font-primary);
            }

            .stat-label {
                font-size: 0.9rem;
                color: var(--gray-medium);
                text-transform: uppercase;
                letter-spacing: 1px;
            }

            .circular-progress {
                position: relative;
                width: 120px;
                height: 120px;
            }

            .progress-ring__progress {
                stroke-dasharray: 327;
                stroke-dashoffset: 327;
                transform-origin: 50% 50%;
                transform: rotate(-90deg);
                transition: stroke-dashoffset 1s ease;
            }

            .progress-text {
                position: absolute;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                text-align: center;
            }

            .progress-number {
                display: block;
                font-size: 1.5rem;
                font-weight: bold;
                color: var(--vibrant-green);
            }

            .progress-label {
                font-size: 0.8rem;
                color: var(--gray-medium);
            }

            .progress-bar-container {
                position: relative;
            }

            .progress-bar {
                height: 12px;
                background: #e1e5e9;
                border-radius: 6px;
                overflow: hidden;
                position: relative;
            }

            .progress-fill {
                height: 100%;
                background: linear-gradient(
                    90deg,
                    var(--vibrant-green),
                    #00d4aa
                );
                border-radius: 6px;
                position: relative;
                overflow: hidden;
            }

            .progress-shine {
                position: absolute;
                top: 0;
                left: -100%;
                width: 100%;
                height: 100%;
                background: linear-gradient(
                    90deg,
                    transparent,
                    rgba(255, 255, 255, 0.3),
                    transparent
                );
                animation: shine 2s infinite;
            }

            @keyframes shine {
                0% {
                    left: -100%;
                }
                100% {
                    left: 100%;
                }
            }

            .progress-milestones {
                display: flex;
                justify-content: space-between;
                position: relative;
                margin-top: 15px;
            }

            .milestone {
                position: absolute;
                text-align: center;
                transform: translateX(-50%);
            }

            .milestone-dot {
                width: 12px;
                height: 12px;
                border-radius: 50%;
                background: #e1e5e9;
                margin: 0 auto 5px;
                transition: all 0.3s;
            }

            .milestone.completed .milestone-dot {
                background: var(--vibrant-green);
            }

            .milestone.current .milestone-dot {
                background: var(--vibrant-green);
                box-shadow: 0 0 0 4px rgba(0, 255, 204, 0.3);
            }

            .milestone-label {
                font-size: 0.7rem;
                color: var(--gray-medium);
                white-space: nowrap;
            }

            .quick-actions h4 {
                margin-bottom: 20px;
            }

            .action-buttons {
                display: flex;
                flex-direction: column;
                gap: 15px;
            }

            .action-btn {
                background: rgba(0, 255, 204, 0.1);
                border: 1px solid rgba(0, 255, 204, 0.2);
                border-radius: 8px;
                padding: 15px;
                text-align: left;
                cursor: pointer;
                transition: all 0.3s;
                color: inherit;
            }

            .action-btn:hover {
                border-color: var(--vibrant-green);
                background: rgba(0, 255, 204, 0.2);
            }

            .action-btn i {
                color: var(--vibrant-green);
                margin-bottom: 8px;
                font-size: 1.2rem;
            }

            .action-btn span {
                display: block;
                font-weight: 600;
                margin-bottom: 4px;
            }

            .action-btn small {
                color: var(--gray-medium);
                font-size: 0.8rem;
            }

            .dashboard-secondary {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
                gap: 20px;
            }

            .activity-timeline {
                max-height: 300px;
                overflow-y: auto;
            }

            .activity-item {
                display: flex;
                gap: 15px;
                padding: 15px 0;
                border-bottom: 1px solid #f0f0f0;
            }

            .activity-item:last-child {
                border-bottom: none;
            }

            .activity-icon {
                width: 40px;
                height: 40px;
                border-radius: 50%;
                display: flex;
                align-items: center;
                justify-content: center;
                flex-shrink: 0;
            }

            .activity-icon.completed {
                background: rgba(40, 167, 69, 0.2);
                color: #28a745;
            }

            .activity-icon.attended {
                background: rgba(0, 123, 255, 0.2);
                color: #007bff;
            }

            .activity-icon.quiz {
                background: rgba(255, 193, 7, 0.2);
                color: #ffc107;
            }

            .activity-content strong {
                display: block;
                margin-bottom: 4px;
            }

            .activity-content small {
                color: var(--gray-medium);
                font-size: 0.8rem;
            }

            .activity-content p {
                margin: 4px 0 0 0;
                color: var(--gray-light);
                font-size: 0.9rem;
            }

            .event-list {
                display: flex;
                flex-direction: column;
                gap: 15px;
            }

            .event-item {
                display: grid;
                grid-template-columns: auto 1fr auto;
                gap: 15px;
                align-items: center;
                padding: 15px;
                background: #f8f9fa;
                border-radius: 8px;
                border-left: 4px solid var(--gray-medium);
            }

            .event-item.urgent {
                border-left-color: #dc3545;
                background: rgba(220, 53, 69, 0.05);
            }

            .event-time {
                text-align: center;
            }

            .event-day {
                display: block;
                font-weight: bold;
                color: var(--vibrant-green);
                font-size: 0.9rem;
            }

            .event-hour {
                font-size: 0.8rem;
                color: var(--gray-medium);
            }

            .event-details strong {
                display: block;
                margin-bottom: 4px;
            }

            .event-details p {
                margin: 0;
                color: var(--gray-light);
                font-size: 0.9rem;
            }

            .event-action {
                background: var(--vibrant-green);
                color: var(--deep-space);
                border: none;
                padding: 8px 16px;
                border-radius: 6px;
                font-weight: 600;
                cursor: pointer;
                transition: all 0.3s;
            }

            .event-action:hover {
                background: #00d4aa;
                transform: translateY(-1px);
            }

            .achievement-grid {
                display: flex;
                flex-direction: column;
                gap: 15px;
            }

            .achievement-item {
                display: flex;
                align-items: center;
                gap: 15px;
                padding: 15px;
                border-radius: 8px;
                transition: all 0.3s;
            }

            .achievement-item.earned {
                background: rgba(0, 255, 204, 0.1);
                border: 1px solid rgba(0, 255, 204, 0.2);
            }

            .achievement-item.progress {
                background: rgba(255, 193, 7, 0.1);
                border: 1px solid rgba(255, 193, 7, 0.2);
            }

            .achievement-icon {
                width: 40px;
                height: 40px;
                border-radius: 50%;
                background: var(--vibrant-green);
                color: var(--deep-space);
                display: flex;
                align-items: center;
                justify-content: center;
                flex-shrink: 0;
            }

            .achievement-item.progress .achievement-icon {
                background: #ffc107;
            }

            .achievement-info {
                flex: 1;
            }

            .achievement-info strong {
                display: block;
                margin-bottom: 4px;
            }

            .achievement-info small {
                color: var(--gray-medium);
                font-size: 0.8rem;
            }

            .achievement-progress {
                width: 100%;
                height: 4px;
                background: rgba(255, 193, 7, 0.3);
                border-radius: 2px;
                margin-top: 8px;
                overflow: hidden;
            }

            .achievement-bar {
                height: 100%;
                background: #ffc107;
                border-radius: 2px;
                transition: width 0.5s ease;
            }

            @media (max-width: 1024px) {
                .dashboard-grid {
                    grid-template-columns: 1fr;
                }

                .progress-summary {
                    grid-template-columns: 1fr;
                    text-align: center;
                }

                .progress-stats {
                    grid-template-columns: repeat(4, 1fr);
                    gap: 15px;
                    justify-items: center;
                }
            }

            @media (max-width: 768px) {
                .dashboard-nav {
                    flex-wrap: wrap;
                }

                .nav-tab {
                    flex: 1;
                    min-width: 120px;
                }

                .resource-grid {
                    grid-template-columns: 1fr;
                }

                .progress-stats {
                    grid-template-columns: repeat(2, 1fr);
                }

                .dashboard-secondary {
                    grid-template-columns: 1fr;
                }

                .event-item {
                    grid-template-columns: 1fr;
                    gap: 10px;
                    text-align: center;
                }
            }
        </style>
    </head>
    <body>
        <!-- Navigation -->
        <nav class="navbar" id="navbar">
            <div class="nav-container">
                <div class="nav-logo">
                    <a href="index.html" class="logo-text">NunyaCode Hub</a>
                </div>
                <div class="nav-menu" id="nav-menu">
                    <a href="index.html" class="nav-link">Home</a>
                    <a href="courses.html" class="nav-link">Courses</a>
                    <a href="enroll.html" class="nav-link">Enroll</a>
                    <a href="student-portal.html" class="nav-link active"
                        >Student Portal</a
                    >
                    <a href="admin.html" class="nav-link">Admin</a>
                </div>
                <div class="nav-toggle" id="nav-toggle">
                    <span class="bar"></span>
                    <span class="bar"></span>
                    <span class="bar"></span>
                </div>
            </div>
        </nav>

        <div class="portal-container">
            <!-- Login Form -->
            <div class="login-container" id="login-container">
                <div class="login-header">
                    <h2>Student Portal Access</h2>
                    <p>Access your courses and track your progress</p>
                </div>

                <!-- Email Check Form (First Step) -->
                <form class="login-form" id="email-check-form">
                    <div class="form-group">
                        <input
                            type="email"
                            id="student-email"
                            placeholder="Enter your enrollment email address"
                            required
                        />
                        <small
                            style="
                                color: #6c7a89;
                                font-size: 12px;
                                margin-top: 5px;
                                display: block;
                            "
                        >
                            Use the same email you used when enrolling for
                            courses
                        </small>
                    </div>
                    <button type="submit" class="btn btn-primary">
                        <span>Continue</span>
                        <i class="fas fa-arrow-right"></i>
                    </button>
                    <p
                        style="
                            margin-top: 20px;
                            font-size: 14px;
                            color: #6c7a89;
                        "
                    >
                        Don't have an enrollment?
                        <a
                            href="enroll.html"
                            style="color: var(--vibrant-green)"
                            >Enroll now</a
                        >
                    </p>
                    <p
                        style="font-size: 12px; color: #dc3545"
                        id="email-check-error"
                    ></p>
                </form>

                <!-- Login Form (Second Step) -->
                <form class="login-form" id="login-form" style="display: none">
                    <div class="login-header" style="margin-bottom: 20px">
                        <h3>Welcome back!</h3>
                        <p>Enter your password to continue</p>
                    </div>
                    <div class="form-group">
                        <input
                            type="email"
                            id="login-email"
                            readonly
                            style="background: #f8f9fa; color: #6c7a89"
                        />
                    </div>
                    <div class="form-group">
                        <input
                            type="password"
                            id="student-password"
                            placeholder="Password"
                            required
                        />
                    </div>
                    <button type="submit" class="btn btn-primary">
                        <span>Login to Portal</span>
                        <i class="fas fa-sign-in-alt"></i>
                    </button>
                    <button
                        type="button"
                        class="btn btn-outline"
                        onclick="goBackToEmailCheck()"
                        style="margin-top: 10px"
                    >
                        <i class="fas fa-arrow-left"></i> Use Different Email
                    </button>
                    <p
                        style="font-size: 12px; color: #dc3545"
                        id="login-error"
                    ></p>
                </form>
            </div>

            <!-- Password Setup Form -->
            <div
                class="login-container"
                id="password-setup-container"
                style="display: none"
            >
                <div class="login-header">
                    <h2>Create Your Account</h2>
                    <p>Welcome! Let's set up your student portal account</p>
                    <div
                        style="
                            background: rgba(0, 255, 204, 0.1);
                            padding: 15px;
                            border-radius: 8px;
                            margin: 15px 0;
                            border-left: 4px solid var(--vibrant-green);
                        "
                    >
                        <i
                            class="fas fa-info-circle"
                            style="color: var(--vibrant-green)"
                        ></i>
                        <strong
                            style="
                                color: var(--vibrant-green);
                                margin-left: 8px;
                            "
                            >First-time setup</strong
                        >
                        <p
                            style="
                                margin: 8px 0 0 0;
                                font-size: 14px;
                                color: #6c7a89;
                            "
                        >
                            We found your enrollment! Create a password to
                            access your student portal.
                        </p>
                    </div>
                </div>
                <form class="login-form" id="password-setup-form">
                    <div class="form-group">
                        <label>Your Email</label>
                        <input
                            type="email"
                            id="setup-email"
                            readonly
                            style="background: #f8f9fa; color: #6c7a89"
                        />
                    </div>

                    <div class="form-group">
                        <label>Create Password</label>
                        <input
                            type="password"
                            id="new-password"
                            placeholder="Minimum 8 characters"
                            required
                            minlength="8"
                        />
                        <div
                            class="password-strength"
                            id="password-strength"
                            style="margin-top: 8px; font-size: 12px"
                        ></div>
                    </div>
                    <div class="form-group">
                        <label>Confirm Password</label>
                        <input
                            type="password"
                            id="confirm-password"
                            placeholder="Re-enter your password"
                            required
                        />
                        <div
                            id="password-match"
                            style="font-size: 12px; margin-top: 5px"
                        ></div>
                    </div>
                    <div
                        style="
                            background: #f8f9fa;
                            padding: 15px;
                            border-radius: 6px;
                            margin: 15px 0;
                            font-size: 12px;
                            color: #6c7a89;
                        "
                    >
                        <i
                            class="fas fa-shield-alt"
                            style="color: var(--vibrant-green)"
                        ></i>
                        <strong>Password Requirements:</strong>
                        <ul style="margin: 5px 0 0 20px; padding: 0">
                            <li>At least 8 characters long</li>
                            <li>
                                Mix of letters, numbers, and symbols recommended
                            </li>
                            <li>Something you'll remember easily</li>
                        </ul>
                    </div>
                    <button type="submit" class="btn btn-primary">
                        <span>Create Account</span>
                        <i class="fas fa-user-plus"></i>
                    </button>
                    <button
                        type="button"
                        class="btn btn-outline"
                        onclick="goBackToEmailCheck()"
                        style="margin-top: 10px"
                    >
                        <i class="fas fa-arrow-left"></i> Use Different Email
                    </button>
                    <p
                        style="font-size: 12px; color: #dc3545"
                        id="setup-error"
                    ></p>
                </form>
            </div>

            <!-- Dashboard -->
            <div class="dashboard-container" id="dashboard-container">
                <div class="dashboard-header">
                    <h1>
                        Welcome back, <span id="student-name">Student</span>!
                    </h1>
                    <p>
                        Continue your journey in
                        <span id="student-course">Course Name</span>
                    </p>
                    <button class="logout-btn" onclick="logout()">
                        <i class="fas fa-sign-out-alt"></i> Logout
                    </button>
                </div>

                <!-- Navigation Tabs -->
                <div class="dashboard-nav">
                    <button
                        class="nav-tab active"
                        onclick="showTab('overview')"
                    >
                        <i class="fas fa-tachometer-alt"></i> Overview
                    </button>
                    <button class="nav-tab" onclick="showTab('lessons')">
                        <i class="fas fa-book"></i> Lessons
                    </button>
                    <button class="nav-tab" onclick="showTab('assignments')">
                        <i class="fas fa-tasks"></i> Assignments
                    </button>
                    <button class="nav-tab" onclick="showTab('grades')">
                        <i class="fas fa-chart-bar"></i> Grades
                    </button>
                    <button class="nav-tab" onclick="showTab('resources')">
                        <i class="fas fa-folder"></i> Resources
                    </button>
                    <button class="nav-tab" onclick="showTab('calendar')">
                        <i class="fas fa-calendar"></i> Calendar
                    </button>
                </div>

                <!-- Overview Tab -->
                <div class="tab-content active" id="overview-tab">
                    <!-- Main Progress Section -->
                    <div class="dashboard-grid">
                        <div class="progress-card main-progress">
                            <div class="progress-header">
                                <h3>
                                    <i class="fas fa-chart-line"></i> Course
                                    Progress
                                </h3>
                                <div class="progress-actions">
                                    <button
                                        class="btn-small btn-outline"
                                        onclick="showProgressDetails()"
                                    >
                                        <i class="fas fa-expand"></i> Details
                                    </button>
                                </div>
                            </div>

                            <div class="progress-summary">
                                <div class="progress-stats">
                                    <div class="stat-item">
                                        <span
                                            class="stat-value"
                                            id="progress-percentage"
                                            >65%</span
                                        >
                                        <span class="stat-label">Complete</span>
                                    </div>
                                    <div class="stat-item">
                                        <span
                                            class="stat-value"
                                            id="current-week"
                                            >8</span
                                        >
                                        <span class="stat-label"
                                            >Current Week</span
                                        >
                                    </div>
                                    <div class="stat-item">
                                        <span
                                            class="stat-value"
                                            id="completed-lessons"
                                            >13</span
                                        >
                                        <span class="stat-label"
                                            >Lessons Done</span
                                        >
                                    </div>
                                    <div class="stat-item">
                                        <span
                                            class="stat-value"
                                            id="current-gpa"
                                            >3.8</span
                                        >
                                        <span class="stat-label">GPA</span>
                                    </div>
                                </div>

                                <div class="progress-visual">
                                    <div
                                        class="circular-progress"
                                        data-percentage="65"
                                    >
                                        <svg
                                            class="progress-ring"
                                            width="120"
                                            height="120"
                                        >
                                            <circle
                                                class="progress-ring__circle"
                                                stroke="#e1e5e9"
                                                stroke-width="8"
                                                fill="transparent"
                                                r="52"
                                                cx="60"
                                                cy="60"
                                            />
                                            <circle
                                                class="progress-ring__progress"
                                                stroke="var(--vibrant-green)"
                                                stroke-width="8"
                                                fill="transparent"
                                                r="52"
                                                cx="60"
                                                cy="60"
                                            />
                                        </svg>
                                        <div class="progress-text">
                                            <span class="progress-number"
                                                >65%</span
                                            >
                                            <span class="progress-label"
                                                >Complete</span
                                            >
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="progress-bar-container">
                                <div class="progress-bar">
                                    <div
                                        class="progress-fill"
                                        id="progress-fill"
                                        style="width: 65%"
                                    >
                                        <div class="progress-shine"></div>
                                    </div>
                                </div>
                                <div class="progress-milestones">
                                    <div
                                        class="milestone completed"
                                        style="left: 25%"
                                    >
                                        <div class="milestone-dot"></div>
                                        <span class="milestone-label"
                                            >Week 3</span
                                        >
                                    </div>
                                    <div
                                        class="milestone completed"
                                        style="left: 50%"
                                    >
                                        <div class="milestone-dot"></div>
                                        <span class="milestone-label"
                                            >Week 6</span
                                        >
                                    </div>
                                    <div
                                        class="milestone current"
                                        style="left: 65%"
                                    >
                                        <div class="milestone-dot"></div>
                                        <span class="milestone-label"
                                            >Week 8</span
                                        >
                                    </div>
                                    <div class="milestone" style="left: 100%">
                                        <div class="milestone-dot"></div>
                                        <span class="milestone-label"
                                            >Complete</span
                                        >
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Quick Actions Card -->
                        <div class="progress-card quick-actions">
                            <h4><i class="fas fa-bolt"></i> Quick Actions</h4>
                            <div class="action-buttons">
                                <button
                                    class="action-btn"
                                    onclick="joinLiveSession()"
                                >
                                    <i class="fas fa-video"></i>
                                    <span>Join Live Session</span>
                                    <small>Next: Today 10:00 AM</small>
                                </button>
                                <button
                                    class="action-btn"
                                    onclick="viewAssignments()"
                                >
                                    <i class="fas fa-tasks"></i>
                                    <span>View Assignments</span>
                                    <small>2 pending</small>
                                </button>
                                <button
                                    class="action-btn"
                                    onclick="accessResources()"
                                >
                                    <i class="fas fa-book"></i>
                                    <span>Study Materials</span>
                                    <small>Week 8 resources</small>
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Activity Feed & Stats -->
                    <div class="dashboard-secondary">
                        <div class="progress-card activity-feed">
                            <h4>
                                <i class="fas fa-clock"></i> Recent Activity
                            </h4>
                            <div class="activity-timeline">
                                <div class="activity-item">
                                    <div class="activity-icon completed">
                                        <i class="fas fa-check"></i>
                                    </div>
                                    <div class="activity-content">
                                        <strong
                                            >Submitted Week 8 Project</strong
                                        >
                                        <small>2 hours ago</small>
                                        <p>Interactive Dashboard - Grade: A-</p>
                                    </div>
                                </div>
                                <div class="activity-item">
                                    <div class="activity-icon attended">
                                        <i class="fas fa-video"></i>
                                    </div>
                                    <div class="activity-content">
                                        <strong>Attended Live Session</strong>
                                        <small>1 day ago</small>
                                        <p>
                                            Python Data Visualization - 3 hours
                                        </p>
                                    </div>
                                </div>
                                <div class="activity-item">
                                    <div class="activity-icon quiz">
                                        <i class="fas fa-question-circle"></i>
                                    </div>
                                    <div class="activity-content">
                                        <strong>Completed Quiz</strong>
                                        <small>3 days ago</small>
                                        <p>
                                            SQL Joins & Relationships - Score:
                                            92%
                                        </p>
                                    </div>
                                </div>
                            </div>
                            <button
                                class="btn-small btn-outline"
                                style="width: 100%; margin-top: 15px"
                            >
                                View Full Activity
                            </button>
                        </div>

                        <div class="progress-card upcoming-events">
                            <h4>
                                <i class="fas fa-calendar-alt"></i> This Week
                            </h4>
                            <div class="event-list">
                                <div class="event-item urgent">
                                    <div class="event-time">
                                        <span class="event-day">Today</span>
                                        <span class="event-hour">10:00 AM</span>
                                    </div>
                                    <div class="event-details">
                                        <strong
                                            >Live Session: Advanced
                                            Python</strong
                                        >
                                        <p>Data manipulation with Pandas</p>
                                    </div>
                                    <button class="event-action">Join</button>
                                </div>
                                <div class="event-item">
                                    <div class="event-time">
                                        <span class="event-day">Mon</span>
                                        <span class="event-hour">11:59 PM</span>
                                    </div>
                                    <div class="event-details">
                                        <strong>Assignment Due</strong>
                                        <p>Portfolio Website Project</p>
                                    </div>
                                    <button class="event-action">Submit</button>
                                </div>
                                <div class="event-item">
                                    <div class="event-time">
                                        <span class="event-day">Wed</span>
                                        <span class="event-hour">2:00 PM</span>
                                    </div>
                                    <div class="event-details">
                                        <strong>Quiz Available</strong>
                                        <p>JavaScript Fundamentals</p>
                                    </div>
                                    <button class="event-action">Start</button>
                                </div>
                            </div>
                        </div>

                        <div class="progress-card achievements">
                            <h4>
                                <i class="fas fa-trophy"></i> Recent
                                Achievements
                            </h4>
                            <div class="achievement-grid">
                                <div class="achievement-item earned">
                                    <div class="achievement-icon">
                                        <i class="fas fa-medal"></i>
                                    </div>
                                    <div class="achievement-info">
                                        <strong>Perfect Week</strong>
                                        <small
                                            >Completed all Week 8 tasks</small
                                        >
                                    </div>
                                </div>
                                <div class="achievement-item earned">
                                    <div class="achievement-icon">
                                        <i class="fas fa-fire"></i>
                                    </div>
                                    <div class="achievement-info">
                                        <strong>4-Week Streak</strong>
                                        <small>Perfect attendance</small>
                                    </div>
                                </div>
                                <div class="achievement-item progress">
                                    <div class="achievement-icon">
                                        <i class="fas fa-star"></i>
                                    </div>
                                    <div class="achievement-info">
                                        <strong>Top Performer</strong>
                                        <small>2/3 weeks as #1</small>
                                        <div class="achievement-progress">
                                            <div
                                                class="achievement-bar"
                                                style="width: 67%"
                                            ></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Lessons Tab -->
                <div class="tab-content" id="lessons-tab">
                    <div id="course-modules">
                        <!-- Data Analytics Modules -->
                        <div
                            class="data-analytics-modules"
                            style="display: none"
                        >
                            <div class="week-module">
                                <div
                                    class="module-header"
                                    onclick="toggleModule(this)"
                                >
                                    <div>
                                        <h3>
                                            <i
                                                class="fas fa-check-circle"
                                                style="color: #28a745"
                                            ></i>
                                            Week 1-3: Excel Fundamentals
                                        </h3>
                                        <p>
                                            Master data manipulation and basic
                                            analysis in Excel
                                        </p>
                                    </div>
                                    <i class="fas fa-chevron-down"></i>
                                </div>
                                <div class="module-content">
                                    <div style="margin-bottom: 15px">
                                        <h4>Lessons:</h4>
                                        <ul
                                            style="list-style: none; padding: 0"
                                        >
                                            <li
                                                style="
                                                    padding: 8px 0;
                                                    border-bottom: 1px solid
                                                        #f0f0f0;
                                                "
                                            >
                                                <i
                                                    class="fas fa-play-circle"
                                                    style="color: #28a745"
                                                ></i>
                                                Introduction to Excel
                                            </li>
                                            <li
                                                style="
                                                    padding: 8px 0;
                                                    border-bottom: 1px solid
                                                        #f0f0f0;
                                                "
                                            >
                                                <i
                                                    class="fas fa-play-circle"
                                                    style="color: #28a745"
                                                ></i>
                                                Data Cleaning Techniques
                                            </li>
                                            <li
                                                style="
                                                    padding: 8px 0;
                                                    border-bottom: 1px solid
                                                        #f0f0f0;
                                                "
                                            >
                                                <i
                                                    class="fas fa-play-circle"
                                                    style="color: #28a745"
                                                ></i>
                                                Pivot Tables & Charts
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                            </div>

                            <div class="week-module">
                                <div
                                    class="module-header"
                                    onclick="toggleModule(this)"
                                >
                                    <div>
                                        <h3>
                                            <i
                                                class="fas fa-check-circle"
                                                style="color: #28a745"
                                            ></i>
                                            Week 4-6: SQL Database Management
                                        </h3>
                                        <p>
                                            Learn to query and manage databases
                                            effectively
                                        </p>
                                    </div>
                                    <i class="fas fa-chevron-down"></i>
                                </div>
                                <div class="module-content">
                                    <div style="margin-bottom: 15px">
                                        <h4>Lessons:</h4>
                                        <ul
                                            style="list-style: none; padding: 0"
                                        >
                                            <li
                                                style="
                                                    padding: 8px 0;
                                                    border-bottom: 1px solid
                                                        #f0f0f0;
                                                "
                                            >
                                                <i
                                                    class="fas fa-play-circle"
                                                    style="color: #28a745"
                                                ></i>
                                                SQL Basics & Syntax
                                            </li>
                                            <li
                                                style="
                                                    padding: 8px 0;
                                                    border-bottom: 1px solid
                                                        #f0f0f0;
                                                "
                                            >
                                                <i
                                                    class="fas fa-play-circle"
                                                    style="color: #28a745"
                                                ></i>
                                                Joins & Relationships
                                            </li>
                                            <li
                                                style="
                                                    padding: 8px 0;
                                                    border-bottom: 1px solid
                                                        #f0f0f0;
                                                "
                                            >
                                                <i
                                                    class="fas fa-play-circle"
                                                    style="color: #28a745"
                                                ></i>
                                                Advanced Queries
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                            </div>

                            <div class="week-module">
                                <div
                                    class="module-header"
                                    onclick="toggleModule(this)"
                                >
                                    <div>
                                        <h3>
                                            <i
                                                class="fas fa-clock"
                                                style="color: #ffc107"
                                            ></i>
                                            Week 7-9: Python for Data Analysis
                                        </h3>
                                        <p>
                                            Dive into Python programming for
                                            data science
                                        </p>
                                    </div>
                                    <i class="fas fa-chevron-down"></i>
                                </div>
                                <div class="module-content">
                                    <div style="margin-bottom: 15px">
                                        <h4>Lessons:</h4>
                                        <ul
                                            style="list-style: none; padding: 0"
                                        >
                                            <li
                                                style="
                                                    padding: 8px 0;
                                                    border-bottom: 1px solid
                                                        #f0f0f0;
                                                "
                                            >
                                                <i
                                                    class="fas fa-play-circle"
                                                    style="color: #ffc107"
                                                ></i>
                                                Python Fundamentals
                                            </li>
                                            <li
                                                style="
                                                    padding: 8px 0;
                                                    border-bottom: 1px solid
                                                        #f0f0f0;
                                                "
                                            >
                                                <i
                                                    class="fas fa-play-circle"
                                                    style="color: #6c757d"
                                                ></i>
                                                Pandas & NumPy
                                            </li>
                                            <li
                                                style="
                                                    padding: 8px 0;
                                                    border-bottom: 1px solid
                                                        #f0f0f0;
                                                "
                                            >
                                                <i
                                                    class="fas fa-play-circle"
                                                    style="color: #6c757d"
                                                ></i>
                                                Data Visualization
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Web Design Modules -->
                        <div class="web-design-modules" style="display: none">
                            <div class="week-module">
                                <div
                                    class="module-header"
                                    onclick="toggleModule(this)"
                                >
                                    <div>
                                        <h3>
                                            <i
                                                class="fas fa-check-circle"
                                                style="color: #28a745"
                                            ></i>
                                            Week 1-4: HTML/CSS Foundations
                                        </h3>
                                        <p>
                                            Build solid foundations in web
                                            markup and styling
                                        </p>
                                    </div>
                                    <i class="fas fa-chevron-down"></i>
                                </div>
                                <div class="module-content">
                                    <div style="margin-bottom: 15px">
                                        <h4>Lessons:</h4>
                                        <ul
                                            style="list-style: none; padding: 0"
                                        >
                                            <li
                                                style="
                                                    padding: 8px 0;
                                                    border-bottom: 1px solid
                                                        #f0f0f0;
                                                "
                                            >
                                                <i
                                                    class="fas fa-play-circle"
                                                    style="color: #28a745"
                                                ></i>
                                                HTML Structure & Semantics
                                            </li>
                                            <li
                                                style="
                                                    padding: 8px 0;
                                                    border-bottom: 1px solid
                                                        #f0f0f0;
                                                "
                                            >
                                                <i
                                                    class="fas fa-play-circle"
                                                    style="color: #28a745"
                                                ></i>
                                                CSS Styling & Layout
                                            </li>
                                            <li
                                                style="
                                                    padding: 8px 0;
                                                    border-bottom: 1px solid
                                                        #f0f0f0;
                                                "
                                            >
                                                <i
                                                    class="fas fa-play-circle"
                                                    style="color: #28a745"
                                                ></i>
                                                Flexbox & Grid
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                            </div>

                            <div class="week-module">
                                <div
                                    class="module-header"
                                    onclick="toggleModule(this)"
                                >
                                    <div>
                                        <h3>
                                            <i
                                                class="fas fa-clock"
                                                style="color: #ffc107"
                                            ></i>
                                            Week 5-8: JavaScript Interactivity
                                        </h3>
                                        <p>
                                            Add dynamic behavior to your
                                            websites
                                        </p>
                                    </div>
                                    <i class="fas fa-chevron-down"></i>
                                </div>
                                <div class="module-content">
                                    <div style="margin-bottom: 15px">
                                        <h4>Lessons:</h4>
                                        <ul
                                            style="list-style: none; padding: 0"
                                        >
                                            <li
                                                style="
                                                    padding: 8px 0;
                                                    border-bottom: 1px solid
                                                        #f0f0f0;
                                                "
                                            >
                                                <i
                                                    class="fas fa-play-circle"
                                                    style="color: #ffc107"
                                                ></i>
                                                JavaScript Basics
                                            </li>
                                            <li
                                                style="
                                                    padding: 8px 0;
                                                    border-bottom: 1px solid
                                                        #f0f0f0;
                                                "
                                            >
                                                <i
                                                    class="fas fa-play-circle"
                                                    style="color: #6c757d"
                                                ></i>
                                                DOM Manipulation
                                            </li>
                                            <li
                                                style="
                                                    padding: 8px 0;
                                                    border-bottom: 1px solid
                                                        #f0f0f0;
                                                "
                                            >
                                                <i
                                                    class="fas fa-play-circle"
                                                    style="color: #6c757d"
                                                ></i>
                                                Event Handling
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Assignments Tab -->
                <div class="tab-content" id="assignments-tab">
                    <div id="assignments-list">
                        <div class="assignment-item">
                            <div>
                                <h4>Week 8 Project: Interactive Dashboard</h4>
                                <p>
                                    Create a responsive data visualization
                                    dashboard
                                </p>
                                <small>Due: January 15, 2025</small>
                            </div>
                            <span class="assignment-status status-completed"
                                >Completed</span
                            >
                        </div>

                        <div class="assignment-item">
                            <div>
                                <h4>Week 9 Project: Portfolio Website</h4>
                                <p>
                                    Build a personal portfolio showcasing your
                                    projects
                                </p>
                                <small>Due: January 20, 2025</small>
                            </div>
                            <span class="assignment-status status-pending"
                                >In Progress</span
                            >
                        </div>

                        <div class="assignment-item">
                            <div>
                                <h4>Quiz: JavaScript Fundamentals</h4>
                                <p>Test your understanding of JS concepts</p>
                                <small>Due: January 22, 2025</small>
                            </div>
                            <span class="assignment-status status-pending"
                                >Not Started</span
                            >
                        </div>
                    </div>
                </div>

                <!-- Grades Tab -->
                <div class="tab-content" id="grades-tab">
                    <div class="progress-card">
                        <h3><i class="fas fa-chart-bar"></i> Grade Summary</h3>
                        <p>
                            Current GPA:
                            <strong
                                style="
                                    color: var(--vibrant-green);
                                    font-size: 1.2rem;
                                "
                                >3.8/4.0</strong
                            >
                        </p>
                    </div>

                    <div id="grades-list">
                        <div class="grade-item">
                            <div>
                                <h4>Week 8 Project</h4>
                                <small>Submitted: January 14, 2025</small>
                            </div>
                            <span class="grade-score">A-</span>
                        </div>

                        <div class="grade-item">
                            <div>
                                <h4>Week 7 Quiz</h4>
                                <small>Submitted: January 10, 2025</small>
                            </div>
                            <span class="grade-score">B+</span>
                        </div>

                        <div class="grade-item">
                            <div>
                                <h4>Week 6 Assignment</h4>
                                <small>Submitted: January 3, 2025</small>
                            </div>
                            <span class="grade-score">A</span>
                        </div>
                    </div>
                </div>

                <!-- Resources Tab -->
                <div class="tab-content" id="resources-tab">
                    <div class="resource-grid">
                        <div class="resource-card">
                            <div class="resource-icon">
                                <i class="fas fa-video"></i>
                            </div>
                            <h4>Recorded Lectures</h4>
                            <p>Access all live session recordings</p>
                            <a href="#" class="btn btn-outline"
                                >View Recordings</a
                            >
                        </div>

                        <div class="resource-card">
                            <div class="resource-icon">
                                <i class="fas fa-file-pdf"></i>
                            </div>
                            <h4>Course Materials</h4>
                            <p>Download slides, handouts, and guides</p>
                            <a href="#" class="btn btn-outline"
                                >Download Files</a
                            >
                        </div>

                        <div class="resource-card">
                            <div class="resource-icon">
                                <i class="fas fa-code"></i>
                            </div>
                            <h4>Code Repository</h4>
                            <p>Access example projects and code samples</p>
                            <a href="#" class="btn btn-outline">View GitHub</a>
                        </div>

                        <div class="resource-card">
                            <div class="resource-icon">
                                <i class="fas fa-comments"></i>
                            </div>
                            <h4>Discussion Forum</h4>
                            <p>Connect with classmates and instructors</p>
                            <a href="#" class="btn btn-outline"
                                >Join Discussion</a
                            >
                        </div>

                        <div class="resource-card">
                            <div class="resource-icon">
                                <i class="fas fa-tools"></i>
                            </div>
                            <h4>Tools & Software</h4>
                            <p>Links to required development tools</p>
                            <a href="#" class="btn btn-outline">Get Tools</a>
                        </div>

                        <div class="resource-card">
                            <div class="resource-icon">
                                <i class="fas fa-book-open"></i>
                            </div>
                            <h4>Reading List</h4>
                            <p>Recommended books and articles</p>
                            <a href="#" class="btn btn-outline">View Reading</a>
                        </div>
                    </div>
                </div>

                <!-- Calendar Tab -->
                <div class="tab-content" id="calendar-tab">
                    <div class="calendar-container">
                        <div class="calendar-header">
                            <h3>
                                <i class="fas fa-calendar"></i> January 2025
                            </h3>
                            <div>
                                <button
                                    class="btn btn-outline"
                                    onclick="previousMonth()"
                                >
                                    <i class="fas fa-chevron-left"></i>
                                </button>
                                <button
                                    class="btn btn-outline"
                                    onclick="nextMonth()"
                                >
                                    <i class="fas fa-chevron-right"></i>
                                </button>
                            </div>
                        </div>

                        <div class="calendar-grid" id="calendar-grid">
                            <!-- Calendar will be generated by JavaScript -->
                        </div>

                        <div style="margin-top: 20px">
                            <h4>Upcoming Events</h4>
                            <div
                                style="
                                    padding: 15px;
                                    background: #f8f9fa;
                                    border-radius: 8px;
                                "
                            >
                                <div style="margin-bottom: 10px">
                                    <strong>January 18, 2025</strong> - Live
                                    Session: Advanced JavaScript
                                </div>
                                <div style="margin-bottom: 10px">
                                    <strong>January 20, 2025</strong> - Project
                                    Deadline: Portfolio Website
                                </div>
                                <div>
                                    <strong>January 25, 2025</strong> - Live
                                    Session: Final Projects Review
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <script>
            // Student Portal JavaScript
            let currentStudent = null;

            // Mock student data
            const studentData = {
                "erickekelimorkli@gmail.com": {
                    name: "Eric Morkli",
                    course: "web-design",
                    courseName: "Modern Web Design",
                    progress: 65,
                    currentWeek: 8,
                    completedLessons: 13,
                },
                "ericmorkli59@gmail.com": {
                    name: "Kekeli Bieteru",
                    course: "web-design",
                    courseName: "Modern Web Design",
                    progress: 45,
                    currentWeek: 6,
                    completedLessons: 9,
                },
            };

            // Email check functionality (First step)
            document
                .getElementById("email-check-form")
                .addEventListener("submit", async function (e) {
                    e.preventDefault();

                    const email =
                        document.getElementById("student-email").value;
                    const errorElement =
                        document.getElementById("email-check-error");

                    try {
                        // Check if email exists in enrollments
                        const response = await fetch(
                            "/api/check-student-email",
                            {
                                method: "POST",
                                headers: {
                                    "Content-Type": "application/json",
                                },
                                body: JSON.stringify({ email }),
                            },
                        );

                        const data = await response.json();

                        if (data.exists) {
                            if (data.hasPassword) {
                                // Show login form
                                showLoginForm(email);
                            } else {
                                // Show password setup
                                showPasswordSetup(email);
                            }
                            errorElement.textContent = "";
                        } else {
                            errorElement.textContent =
                                "Email not found in our enrollment records. Please check your email or enroll first.";
                        }
                    } catch (error) {
                        errorElement.textContent =
                            "Network error. Please try again.";
                        console.error("Email check error:", error);
                    }
                });

            // Login functionality (Second step)
            document
                .getElementById("login-form")
                .addEventListener("submit", async function (e) {
                    e.preventDefault();

                    const email = document.getElementById("login-email").value;
                    const password =
                        document.getElementById("student-password").value;
                    const errorElement = document.getElementById("login-error");

                    try {
                        const response = await fetch("/api/student-login", {
                            method: "POST",
                            headers: {
                                "Content-Type": "application/json",
                            },
                            body: JSON.stringify({ email, password }),
                        });

                        const data = await response.json();

                        if (data.success) {
                            currentStudent = data.student;
                            showDashboard();
                            errorElement.textContent = "";
                        } else {
                            errorElement.textContent =
                                data.error || "Invalid password";
                        }
                    } catch (error) {
                        errorElement.textContent =
                            "Network error. Please try again.";
                        console.error("Login error:", error);
                    }
                });

            // Password setup functionality with enhanced validation
            document
                .getElementById("password-setup-form")
                .addEventListener("submit", async function (e) {
                    e.preventDefault();

                    const email = document.getElementById("setup-email").value;
                    const newPassword =
                        document.getElementById("new-password").value;
                    const confirmPassword =
                        document.getElementById("confirm-password").value;
                    const errorElement = document.getElementById("setup-error");

                    if (newPassword !== confirmPassword) {
                        errorElement.textContent = "Passwords do not match";
                        return;
                    }

                    if (newPassword.length < 8) {
                        errorElement.textContent =
                            "Password must be at least 8 characters long";
                        return;
                    }

                    try {
                        const response = await fetch(
                            "/api/student-setup-password",
                            {
                                method: "POST",
                                headers: {
                                    "Content-Type": "application/json",
                                },
                                body: JSON.stringify({
                                    email,
                                    newPassword,
                                }),
                            },
                        );

                        const data = await response.json();

                        if (data.success) {
                            showSuccessMessage(
                                "Account created successfully! Logging you in...",
                            );
                            // Automatically log in the user
                            setTimeout(() => {
                                autoLogin(email, newPassword);
                            }, 1500);
                            errorElement.textContent = "";
                        } else {
                            errorElement.textContent =
                                data.error || "Account creation failed";
                        }
                    } catch (error) {
                        errorElement.textContent =
                            "Network error. Please try again.";
                        console.error("Password setup error:", error);
                    }
                });

            // Real-time password validation
            document
                .getElementById("new-password")
                .addEventListener("input", function () {
                    const password = this.value;
                    const strengthElement =
                        document.getElementById("password-strength");

                    if (password.length === 0) {
                        strengthElement.textContent = "";
                        return;
                    }

                    let strength = 0;
                    let feedback = [];

                    if (password.length >= 8) strength++;
                    else feedback.push("At least 8 characters");

                    if (/[a-z]/.test(password)) strength++;
                    else feedback.push("lowercase letter");

                    if (/[A-Z]/.test(password)) strength++;
                    else feedback.push("uppercase letter");

                    if (/\d/.test(password)) strength++;
                    else feedback.push("number");

                    if (/[^a-zA-Z0-9]/.test(password)) strength++;
                    else feedback.push("special character");

                    const colors = [
                        "#dc3545",
                        "#fd7e14",
                        "#ffc107",
                        "#28a745",
                        "#28a745",
                    ];
                    const labels = [
                        "Very Weak",
                        "Weak",
                        "Fair",
                        "Good",
                        "Strong",
                    ];

                    strengthElement.style.color = colors[strength];
                    strengthElement.textContent = `Strength: ${labels[strength]}`;

                    if (feedback.length > 0 && strength < 3) {
                        strengthElement.textContent += ` (Add: ${feedback.slice(0, 2).join(", ")})`;
                    }
                });

            // Real-time password match validation
            document
                .getElementById("confirm-password")
                .addEventListener("input", function () {
                    const password =
                        document.getElementById("new-password").value;
                    const confirm = this.value;
                    const matchElement =
                        document.getElementById("password-match");

                    if (confirm.length === 0) {
                        matchElement.textContent = "";
                        return;
                    }

                    if (password === confirm) {
                        matchElement.style.color = "#28a745";
                        matchElement.innerHTML =
                            '<i class="fas fa-check"></i> Passwords match';
                    } else {
                        matchElement.style.color = "#dc3545";
                        matchElement.innerHTML =
                            '<i class="fas fa-times"></i> Passwords do not match';
                    }
                });

            function showLoginForm(email) {
                document.getElementById("email-check-form").style.display =
                    "none";
                document.getElementById("login-form").style.display = "block";
                document.getElementById("login-email").value = email;
                document.getElementById("student-password").focus();
            }

            function showPasswordSetup(email) {
                document.getElementById("email-check-form").style.display =
                    "none";
                document.getElementById("login-container").style.display =
                    "none";
                document.getElementById(
                    "password-setup-container",
                ).style.display = "block";
                document.getElementById("setup-email").value = email;
            }

            function goBackToEmailCheck() {
                document.getElementById("email-check-form").style.display =
                    "block";
                document.getElementById("login-form").style.display = "none";
                document.getElementById(
                    "password-setup-container",
                ).style.display = "none";
                document.getElementById("login-container").style.display =
                    "block";
                document.getElementById("student-email").focus();
            }

            function showSuccessMessage(message) {
                const successDiv = document.createElement("div");
                successDiv.style.cssText = `
                position: fixed;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                background: linear-gradient(135deg, #28a745, #20c997);
                color: white;
                padding: 20px 30px;
                border-radius: 12px;
                box-shadow: 0 10px 30px rgba(0,0,0,0.3);
                z-index: 10000;
                text-align: center;
                font-weight: 600;
            `;
                successDiv.innerHTML = `<i class="fas fa-check-circle" style="margin-right: 10px; font-size: 1.2rem;"></i>${message}`;
                document.body.appendChild(successDiv);

                setTimeout(() => {
                    document.body.removeChild(successDiv);
                }, 3000);
            }

            async function autoLogin(email, password) {
                try {
                    const response = await fetch("/api/student-login", {
                        method: "POST",
                        headers: {
                            "Content-Type": "application/json",
                        },
                        body: JSON.stringify({ email, password }),
                    });

                    const data = await response.json();

                    if (data.success) {
                        currentStudent = data.student;
                        showDashboard();
                    }
                } catch (error) {
                    console.error("Auto-login error:", error);
                    goBackToEmailCheck();
                }
            }

            function showDashboard() {
                document.getElementById("login-container").style.display =
                    "none";
                document.getElementById("dashboard-container").style.display =
                    "block";

                // Update dashboard with student data
                document.getElementById("student-name").textContent =
                    currentStudent.name;
                document.getElementById("student-course").textContent =
                    currentStudent.courseName;
                document.getElementById("progress-percentage").textContent =
                    currentStudent.progress + "%";
                document.getElementById("progress-fill").style.width =
                    currentStudent.progress + "%";
                document.getElementById("current-week").textContent =
                    currentStudent.currentWeek;
                document.getElementById("completed-lessons").textContent =
                    currentStudent.completedLessons;

                // Show course-specific modules
                if (currentStudent.course === "data-analytics") {
                    document.querySelector(
                        ".data-analytics-modules",
                    ).style.display = "block";
                    document.querySelector(
                        ".web-design-modules",
                    ).style.display = "none";
                } else {
                    document.querySelector(
                        ".web-design-modules",
                    ).style.display = "block";
                    document.querySelector(
                        ".data-analytics-modules",
                    ).style.display = "none";
                }

                generateCalendar();
            }

            async function logout() {
                try {
                    await fetch("/api/student-logout", {
                        method: "POST",
                        headers: {
                            "Content-Type": "application/json",
                        },
                    });
                } catch (error) {
                    console.error("Logout error:", error);
                }

                currentStudent = null;
                document.getElementById("login-container").style.display =
                    "block";
                document.getElementById("dashboard-container").style.display =
                    "none";
                document.getElementById("student-email").value = "";
                document.getElementById("student-password").value = "";
            }

            // Check authentication on page load
            async function checkAuth() {
                try {
                    const response = await fetch("/api/student-data");
                    const data = await response.json();

                    if (data.success) {
                        currentStudent = data.student;
                        showDashboard();
                    }
                } catch (error) {
                    console.log("Not authenticated");
                }
            }

            // Check authentication when page loads
            document.addEventListener("DOMContentLoaded", function () {
                checkAuth();

                // Mobile navigation (reuse from existing code)
                const navToggle = document.getElementById("nav-toggle");
                const navMenu = document.getElementById("nav-menu");

                if (navToggle && navMenu) {
                    navToggle.addEventListener("click", function () {
                        navMenu.classList.toggle("active");
                        navToggle.classList.toggle("active");
                    });
                }
            });

            function showTab(tabName) {
                // Hide all tabs
                document.querySelectorAll(".tab-content").forEach((tab) => {
                    tab.classList.remove("active");
                });
                document.querySelectorAll(".nav-tab").forEach((btn) => {
                    btn.classList.remove("active");
                });

                // Show selected tab
                document
                    .getElementById(tabName + "-tab")
                    .classList.add("active");
                event.target.classList.add("active");
            }

            function toggleModule(header) {
                const content = header.nextElementSibling;
                const icon = header.querySelector(".fa-chevron-down");

                content.classList.toggle("expanded");
                icon.style.transform = content.classList.contains("expanded")
                    ? "rotate(180deg)"
                    : "rotate(0deg)";
            }

            // Calendar functionality
            function generateCalendar() {
                const calendar = document.getElementById("calendar-grid");
                const daysOfWeek = [
                    "Sun",
                    "Mon",
                    "Tue",
                    "Wed",
                    "Thu",
                    "Fri",
                    "Sat",
                ];
                const currentDate = new Date();
                const year = currentDate.getFullYear();
                const month = currentDate.getMonth();

                // Clear previous calendar
                calendar.innerHTML = "";

                // Add day headers
                daysOfWeek.forEach((day) => {
                    const dayHeader = document.createElement("div");
                    dayHeader.className = "calendar-day";
                    dayHeader.style.fontWeight = "bold";
                    dayHeader.style.background = "#f0f0f0";
                    dayHeader.textContent = day;
                    calendar.appendChild(dayHeader);
                });

                // Get first day of month and number of days
                const firstDay = new Date(year, month, 1).getDay();
                const daysInMonth = new Date(year, month + 1, 0).getDate();

                // Add empty cells for days before month starts
                for (let i = 0; i < firstDay; i++) {
                    const emptyDay = document.createElement("div");
                    emptyDay.className = "calendar-day";
                    calendar.appendChild(emptyDay);
                }

                // Add days of the month
                for (let day = 1; day <= daysInMonth; day++) {
                    const dayCell = document.createElement("div");
                    dayCell.className = "calendar-day";
                    dayCell.textContent = day;

                    // Mark days with events
                    if ([18, 20, 25].includes(day)) {
                        dayCell.classList.add("has-event");
                    }

                    calendar.appendChild(dayCell);
                }
            }

            function previousMonth() {
                // Calendar navigation would be implemented here
                console.log("Previous month");
            }

            function nextMonth() {
                // Calendar navigation would be implemented here
                console.log("Next month");
            }

            // Enhanced dashboard functionality
            function showProgressDetails() {
                // Create modal for detailed progress view
                const modal = document.createElement("div");
                modal.className = "progress-modal";
                modal.innerHTML = `
                <div class="modal-content">
                    <div class="modal-header">
                        <h3>Detailed Progress Report</h3>
                        <button class="modal-close" onclick="closeModal()">&times;</button>
                    </div>
                    <div class="modal-body">
                        <div class="progress-breakdown">
                            <h4>Week-by-Week Progress</h4>
                            <div class="week-progress-list">
                                <div class="week-item completed">
                                    <span class="week-number">Week 1-3</span>
                                    <span class="week-title">Excel Fundamentals</span>
                                    <span class="week-score">95%</span>
                                </div>
                                <div class="week-item completed">
                                    <span class="week-number">Week 4-6</span>
                                    <span class="week-title">SQL Database Management</span>
                                    <span class="week-score">88%</span>
                                </div>
                                <div class="week-item current">
                                    <span class="week-number">Week 7-9</span>
                                    <span class="week-title">Python for Data Analysis</span>
                                    <span class="week-score">In Progress</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
                document.body.appendChild(modal);

                // Add modal styles
                const style = document.createElement("style");
                style.textContent = `
                .progress-modal {
                    position: fixed;
                    top: 0;
                    left: 0;
                    width: 100%;
                    height: 100%;
                    background: rgba(0,0,0,0.8);
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    z-index: 1000;
                }
                .modal-content {
                    background: white;
                    border-radius: 12px;
                    max-width: 600px;
                    width: 90%;
                    max-height: 80vh;
                    overflow-y: auto;
                }
                .modal-header {
                    display: flex;
                    justify-content: space-between;
                    align-items: center;
                    padding: 20px;
                    border-bottom: 1px solid #e1e5e9;
                }
                .modal-close {
                    background: none;
                    border: none;
                    font-size: 24px;
                    cursor: pointer;
                    color: #6c7a89;
                }
                .modal-body {
                    padding: 20px;
                }
                .week-progress-list {
                    display: flex;
                    flex-direction: column;
                    gap: 10px;
                }
                .week-item {
                    display: grid;
                    grid-template-columns: auto 1fr auto;
                    gap: 15px;
                    padding: 15px;
                    border-radius: 8px;
                    align-items: center;
                }
                .week-item.completed {
                    background: rgba(40, 167, 69, 0.1);
                    border: 1px solid rgba(40, 167, 69, 0.2);
                }
                .week-item.current {
                    background: rgba(0, 255, 204, 0.1);
                    border: 1px solid rgba(0, 255, 204, 0.2);
                }
                .week-number {
                    font-weight: bold;
                    color: var(--vibrant-green);
                }
                .week-score {
                    font-weight: bold;
                }
            `;
                document.head.appendChild(style);
            }

            function closeModal() {
                const modal = document.querySelector(".progress-modal");
                if (modal) {
                    modal.remove();
                }
            }

            function joinLiveSession() {
                // Simulate joining a live session
                alert(
                    "Redirecting to Zoom session...\n\nMeeting ID: 123-456-789\nPassword: nunyacode2025\n\nThis would normally open your Zoom app or web browser.",
                );
            }

            function viewAssignments() {
                showTab("assignments");
            }

            function accessResources() {
                showTab("resources");
            }

            // Initialize circular progress animation
            function initCircularProgress() {
                const progressRings =
                    document.querySelectorAll(".circular-progress");

                progressRings.forEach((ring) => {
                    const percentage = ring.getAttribute("data-percentage");
                    const circle = ring.querySelector(
                        ".progress-ring__progress",
                    );
                    const radius = circle.r.baseVal.value;
                    const circumference = 2 * Math.PI * radius;

                    circle.style.strokeDasharray = circumference;
                    circle.style.strokeDashoffset = circumference;

                    // Animate on load
                    setTimeout(() => {
                        const offset =
                            circumference - (percentage / 100) * circumference;
                        circle.style.strokeDashoffset = offset;
                    }, 500);
                });
            }

            // Enhanced tab switching with animations
            function showTab(tabName) {
                // Hide all tabs with fade effect
                document.querySelectorAll(".tab-content").forEach((tab) => {
                    tab.style.opacity = "0";
                    setTimeout(() => {
                        tab.classList.remove("active");
                    }, 150);
                });

                document.querySelectorAll(".nav-tab").forEach((btn) => {
                    btn.classList.remove("active");
                });

                // Show selected tab with fade in
                setTimeout(() => {
                    const targetTab = document.getElementById(tabName + "-tab");
                    targetTab.classList.add("active");
                    targetTab.style.opacity = "1";

                    // Update active nav button
                    event.target.classList.add("active");
                }, 150);
            }

            // Initialize notifications system
            function initNotifications() {
                // Check for upcoming deadlines
                const now = new Date();
                const tomorrow = new Date(now.getTime() + 24 * 60 * 60 * 1000);

                // Simulate deadline checking
                if (Math.random() > 0.7) {
                    showNotification(
                        "Assignment due tomorrow: Portfolio Website Project",
                        "warning",
                    );
                }
            }

            function showNotification(message, type = "info") {
                const notification = document.createElement("div");
                notification.className = `notification notification-${type}`;
                notification.innerHTML = `
                <div class="notification-content">
                    <i class="fas fa-${type === "warning" ? "exclamation-triangle" : "info-circle"}"></i>
                    <span>${message}</span>
                </div>
                <button class="notification-close" onclick="this.parentElement.remove()">&times;</button>
            `;

                // Add notification styles
                if (!document.querySelector("#notification-styles")) {
                    const style = document.createElement("style");
                    style.id = "notification-styles";
                    style.textContent = `
                    .notification {
                        position: fixed;
                        top: 100px;
                        right: 20px;
                        background: white;
                        border-radius: 8px;
                        padding: 15px;
                        box-shadow: 0 4px 20px rgba(0,0,0,0.2);
                        z-index: 1000;
                        display: flex;
                        align-items: center;
                        gap: 10px;
                        max-width: 400px;
                        animation: slideIn 0.3s ease;
                    }
                    .notification-warning {
                        border-left: 4px solid #ffc107;
                    }
                    .notification-content {
                        display: flex;
                        align-items: center;
                        gap: 10px;
                        flex: 1;
                    }
                    .notification-close {
                        background: none;
                        border: none;
                        font-size: 18px;
                        cursor: pointer;
                        color: #6c7a89;
                    }
                    @keyframes slideIn {
                        from { transform: translateX(100%); opacity: 0; }
                        to { transform: translateX(0); opacity: 1; }
                    }
                `;
                    document.head.appendChild(style);
                }

                document.body.appendChild(notification);

                // Auto remove after 5 seconds
                setTimeout(() => {
                    if (notification.parentElement) {
                        notification.remove();
                    }
                }, 5000);
            }

            // Initialize navigation and enhanced features
            document.addEventListener("DOMContentLoaded", function () {
                // Mobile navigation (reuse from existing code)
                const navToggle = document.getElementById("nav-toggle");
                const navMenu = document.getElementById("nav-menu");

                if (navToggle && navMenu) {
                    navToggle.addEventListener("click", function () {
                        navMenu.classList.toggle("active");
                        navToggle.classList.toggle("active");
                    });
                }

                // Initialize enhanced features
                initCircularProgress();
                initNotifications();

                // Add smooth transitions to all tab content
                document.querySelectorAll(".tab-content").forEach((tab) => {
                    tab.style.transition = "opacity 0.3s ease";
                });
            });
        </script>
    </body>
</html>
